"use strict";var r=require("vite");const t=r=>r.replace(/^.*[\\\/]/,""),n=(r,t)=>`import ${r} from '${t}'`,o=(r,t)=>`const ${r} = lazy(() => import('${t}'))`,e=new Map;function a(r){const c=new Set,i=new Set,s=new Array,l=(r,t=!1)=>{void 0!==e.get(r)&&t||e.set(r,t)},m=(r,n="")=>{for(const[o,e]of Object.entries(r)){const r=`${n}${o}`;if("object"==typeof e)if(e.src){const n=e,o=n.src,m=n.dynamic??!1;l(o,m);const u={};if(n.action&&(u.action=n.action),n.errorElement&&(u.errorElement=n.errorElement),n.hasErrorBoundary&&(u.hasErrorBoundary=n.hasErrorBoundary),n.loader&&(u.loader=n.loader),n.shouldRevalidate&&(u.shouldRevalidate=n.shouldRevalidate),n.dynamic&&(u.lazy=`async () => {\n              const imports = await import('${n.src}')\n              const component = imports.default ?? imports.Component;\n              const loader = imports.loader ? { loader: imports.loader } : {};\n              return {\n                Component: component,\n                ...loader,\n              }\n            }`),n.children){const r=a(n.children);r.imports.dynamic.forEach((r=>{c.add(r)})),r.imports.static.forEach((r=>{i.add(r)})),u.children=`${r.routes}`}s.push({route:r,component:t(o),config:u})}else m(e,r);else l(e),s.push({route:r,component:t(e)})}};return m(r),{imports:(()=>{for(const[r,a]of e){const e=t(r);a?c.add(o(e,r)):i.add(n(e,r))}return{dynamic:Array.from(c)??[],static:Array.from(i)??[]}})(),routes:s.map((({route:r,component:t,config:n})=>{const o=n??{};return`\n        {\n          path: '${r}',\n          ${o.lazy?"":`element: /*#__PURE__*/React.createElement(${t}, null),`}\n          ${(r=>{const t="async";return Object.entries(r).map((([r,n])=>{if("function"==typeof n){let o=n.toString();return o.startsWith(t)&&(o=o.slice(t.length,o.length).trim()),o.startsWith("function")?`${r}: ${n.toString()},`:`${n.toString()},`}return"children"===r?`${r}: [\n            ${n}\n          ],`:`${r}: ${n},`})).join("\n")})(o)}\n        }\n      `}))}}module.exports=function(t){const{name:n,option:o,root:c}=t,i=n??"router.config.js",s=`${c??""}/${r.normalizePath(i)}`;return{name:"vite-plugin-react-router-dom",enforce:"pre",async load(r){if(r.includes(s)){return function(r,t={}){e.clear();const{imports:n,routes:o}=a(r);return`\n  import React from 'react';\n  import { createBrowserRouter } from 'react-router-dom';\n  import { lazy } from 'react';\n\n  ${n.static.join("\n")}\n  \n  const router = createBrowserRouter(\n    [${o}],\n    ${JSON.stringify(t)}\n  );\n  \n  export default router;\n  `}((await import(r)).default,o)}return null}}};
//# sourceMappingURL=vite-plugin-react-router-dom.cjs.map
