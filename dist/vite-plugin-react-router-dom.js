import{normalizePath as t}from"vite";const r=t=>t.replace(/^.*[\\\/]/,"");function e(t,e={}){const n=new Map,o=new Array,a=(t,r=!1)=>{void 0!==n.get(t)&&r||n.set(t,r)},c=(t,e="")=>{for(const[n,i]of Object.entries(t)){const t=`${e}${n}`;if("object"==typeof i)if(i.src){const e=i,n=e.src,c=e.dynamic??!0;a(n,c);const s={};e.action&&(s.action=e.action),e.dynamic&&(s.dynamic=e.dynamic),e.errorElement&&(s.errorElement=e.errorElement),e.hasErrorBoundary&&(s.errorElement=e.hasErrorBoundary),e.loader&&(s.loader=e.loader),e.shouldRevalidate&&(s.shouldRevalidate=e.shouldRevalidate),o.push({route:t,component:r(n),config:s})}else c(i,t);else a(i),o.push({route:t,component:r(i)})}};c(t);return`\n  import React from 'react';\n  import { createBrowserRouter } from 'react-router-dom';\n  import { lazy } from 'react';\n\n  ${(()=>{const t=[],e=[];for(const[o,a]of n){const n=r(o);a?e.push(`const ${n} = lazy(() => import('${o}'))`):t.push(`import ${n} from '${o}'`)}return[...t,...e].join("\n")})()}\n  \n  const router = createBrowserRouter(\n    [${o.map((({route:t,component:r,config:e})=>`\n        {\n          path: '${t}',\n          element: /*#__PURE__*/React.createElement(${r}, null),\n          ${(t=>{const r="async";return Object.entries(t).map((([t,e])=>{if("function"==typeof e){let n=e.toString();return n.startsWith(r)&&(n=n.slice(r.length,n.length).trim()),n.startsWith("function")?`${t}: ${e.toString()}`:`${e.toString()}`}return`${t}: ${e},`})).join("\n")})(e??{})}\n        }\n      `))}],\n    ${JSON.stringify(e)}\n  );\n  \n  export default router;\n  `}function n(r){const{name:n,option:o,root:a}=r,c=`${a??"/"}/${t(n??"router.config.js")}`;return{name:"vite-plugin-react-router-dom",enforce:"pre",async load(t){if(t.includes(c)){return e((await import(t)).default,o)}return null}}}export{n as default};
//# sourceMappingURL=vite-plugin-react-router-dom.js.map
